<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PolyChat - Meet LUMA</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #e5e7eb; border-radius: 10px; }
        
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        .slide-up { animation: slideUp 0.4s ease-out forwards; }
        .pop-in { animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        
        .typing-dot { animation: typingBounce 1s infinite; }
        @keyframes typingBounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }

        /* Duolingo-ish Styles */
        .btn-bubbly { transition: all 0.1s; border-bottom-width: 4px; }
        .btn-bubbly:active { border-bottom-width: 0px; transform: translateY(4px); }
        
        /* Chip Styles for Smart Reply */
        .chip-l1 { background: #dbeafe; color: #1e40af; border: 1px solid #bfdbfe; }
        .chip-l2 { background: #d1fae5; color: #065f46; border: 1px solid #a7f3d0; }
        .chip-l3 { background: #f3e8ff; color: #6b21a8; border: 1px solid #e9d5ff; }
    </style>
</head>
<body class="bg-gray-50 font-sans text-gray-900 h-screen overflow-hidden flex flex-col select-none">

    <!-- APP CONTAINER -->
    <div id="app" class="h-full w-full max-w-md mx-auto bg-white shadow-2xl relative flex flex-col overflow-hidden sm:rounded-xl sm:h-[95vh] sm:my-[2.5vh]">
        
        <!-- Screen: HOME -->
        <div id="screen-home" class="flex flex-col h-full bg-[#fdfdfd] relative z-10">
            <!-- Top Bar -->
            <div class="px-5 py-4 flex justify-between items-center bg-white border-b border-gray-100">
                <div class="flex items-center gap-2 cursor-pointer" onclick="toggleLangMenu()">
                    <img id="flag-icon" src="https://flagsapi.com/US/flat/64.png" class="w-8 h-8 rounded-full border-2 border-gray-100 hover:scale-110 transition-transform">
                    <span class="text-xs font-bold text-gray-400">â–¼</span>
                </div>
                <div class="flex items-center gap-1 text-red-500 font-bold bg-red-50 px-3 py-1 rounded-full">
                    <i data-lucide="heart" class="w-4 h-4 fill-current"></i>
                    <span id="bond-score-display">0</span>
                </div>
            </div>

            <!-- Language Menu -->
            <div id="lang-menu" class="hidden absolute top-16 left-4 bg-white rounded-2xl shadow-xl border-2 border-gray-100 w-56 overflow-hidden z-50 pop-in">
                <div class="p-3 bg-gray-50 border-b border-gray-100 text-xs font-bold text-gray-400 uppercase">Choose your LUMA</div>
                <div id="lang-list"></div>
            </div>

            <!-- Main Content -->
            <div class="flex-1 overflow-y-auto p-6 space-y-8 scroll-smooth">
                <!-- Character Card -->
                <div class="text-center mb-8 fade-in">
                    <div class="relative w-28 h-28 mx-auto mb-4 group">
                        <div id="home-avatar" class="w-full h-full rounded-full flex items-center justify-center text-4xl font-bold text-white shadow-xl ring-4 ring-white transition-transform group-hover:scale-105"></div>
                        <div class="absolute -bottom-1 -right-1 bg-green-500 w-7 h-7 rounded-full border-4 border-white"></div>
                    </div>
                    <h2 id="home-bot-name" class="text-2xl font-extrabold text-gray-800">LUMA</h2>
                    <p id="home-bot-desc" class="text-gray-500 text-sm mt-2 px-4 italic">"Here to listen, not to judge."</p>
                </div>

                <!-- Topic Path -->
                <div class="space-y-6 relative pb-10">
                    <div class="absolute left-1/2 top-4 bottom-4 w-2 bg-gray-100 -translate-x-1/2 rounded-full -z-10"></div>
                    <div class="flex flex-col items-center gap-8" id="topic-list"></div>
                </div>
            </div>
        </div>

        <!-- Screen: CHAT -->
        <div id="screen-chat" class="flex flex-col h-full bg-gray-50 absolute inset-0 transform translate-x-full transition-transform duration-300 z-20">
            
            <!-- Chat Header -->
            <div class="bg-white px-4 py-3 border-b border-gray-100 flex items-center justify-between shrink-0 shadow-sm z-30">
                <button onclick="goHome()" class="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full">
                    <i data-lucide="arrow-left" class="w-6 h-6"></i>
                </button>
                <div class="flex flex-col items-center">
                    <div class="flex items-center gap-1">
                        <span id="chat-luma-name" class="font-bold text-gray-800">LUMA</span>
                        <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    </div>
                    <div class="text-[10px] text-gray-400 font-medium" id="chat-topic-title">Chat Mode</div>
                </div>
                <button class="p-2 text-gray-300 hover:text-blue-500 rounded-full">
                    <i data-lucide="more-vertical" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- Chat Messages -->
            <div id="messages-list" class="flex-1 overflow-y-auto p-4 space-y-4"></div>

            <!-- Smart Reply Container (Hidden by default) -->
            <div id="smart-reply-container" class="bg-white/90 backdrop-blur-sm border-t border-gray-100 px-4 py-2 hidden flex-col gap-2 animate-slide-up z-20">
                <div class="flex justify-between items-center">
                    <span class="text-[10px] font-bold text-gray-400 uppercase tracking-wider">LUMA Assist</span>
                    <button onclick="toggleSmartReply()" class="text-gray-400 hover:text-gray-600"><i data-lucide="x" class="w-3 h-3"></i></button>
                </div>
                <div class="flex gap-2 overflow-x-auto pb-1 no-scrollbar" id="smart-chips">
                    <!-- Chips injected via JS -->
                </div>
            </div>

            <!-- Input Area -->
            <div class="bg-white p-3 border-t border-gray-100 shrink-0 z-30">
                <form id="chat-form" class="flex items-center gap-2 relative">
                    <!-- Smart Reply Toggle -->
                    <button type="button" onclick="toggleSmartReply()" class="p-2 text-purple-500 bg-purple-50 hover:bg-purple-100 rounded-full transition-colors" title="I don't know what to say">
                        <i data-lucide="wand-2" class="w-5 h-5"></i>
                    </button>
                    
                    <input type="text" id="message-input" placeholder="Say something..." class="flex-1 bg-gray-100 text-gray-800 border-0 rounded-2xl py-3 px-4 focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all outline-none" autocomplete="off">
                    
                    <button id="send-btn" type="submit" class="p-3 bg-gray-200 text-gray-500 rounded-xl btn-bubbly border-gray-300 disabled:opacity-50">
                        <i data-lucide="send" class="w-5 h-5"></i>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Bonding Toast -->
    <div id="bond-toast" class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none z-50 hidden">
        <div class="bg-gradient-to-r from-red-500 to-pink-500 text-white font-bold px-6 py-3 rounded-full shadow-xl flex items-center gap-2 pop-in">
            <i data-lucide="heart" class="w-5 h-5 fill-white"></i>
            <span>Connection +10</span>
        </div>
    </div>

    <script>
        // --- DATA & CONFIG (LUMA PERSONAS) ---
        const CONFIG = {
            en: { 
                name: "English", 
                botName: "LUMA (EN)", 
                avatarColor: "bg-blue-500", 
                flag: "US",
                desc: "Warm & Encouraging. \"Don't worry about grammar, just talk.\"",
                topics: [
                    { 
                        id: 'greet', icon: 'hand', title: "Say Hi", 
                        prompt: "Hey! Long time no see. How have you been? ðŸ˜Š", 
                        replies: [
                            { level: 1, text: "I'm good!" },
                            { level: 2, text: "I've been busy with work." },
                            { level: 3, text: "Honestly, it's been a rollercoaster week." }
                        ]
                    },
                    { 
                        id: 'mood', icon: 'cloud-sun', title: "Feelings", 
                        prompt: "You seem a bit quiet today. Is everything okay?", 
                        replies: [
                            { level: 1, text: "I'm fine." },
                            { level: 2, text: "I'm just a little tired." },
                            { level: 3, text: "I'm feeling a bit burned out lately." }
                        ]
                    }
                ]
            },
            jp: { 
                name: "æ—¥æœ¬èªž", 
                botName: "ãƒ«ãƒž (JP)", 
                avatarColor: "bg-red-400", 
                flag: "JP",
                desc: "Gentle & Considerate. \"ç„¡ç†ã—ãªãã¦ã„ã„ã‚ˆã€‚\"",
                topics: [
                    { 
                        id: 'greet', icon: 'hand', title: "æŒ¨æ‹¶ (Hi)", 
                        prompt: "ã‚„ã£ã»ãƒ¼ï¼å…ƒæ°—ã«ã—ã¦ãŸï¼Ÿç„¡ç†ã—ãªã„ã§ã­ã€‚", 
                        replies: [
                            { level: 1, text: "å…ƒæ°—ã ã‚ˆï¼" },
                            { level: 2, text: "ã¡ã‚‡ã£ã¨ç–²ã‚ŒãŸã‹ãªã€‚" },
                            { level: 3, text: "å¿™ã—ã‹ã£ãŸã‘ã©ã€å……å®Ÿã—ã¦ãŸã‚ˆã€‚" }
                        ]
                    },
                    { 
                        id: 'mood', icon: 'cloud-sun', title: "æ°—åˆ† (Mood)", 
                        prompt: "ãªã‚“ã‹å…ƒæ°—ãªã„ï¼Ÿè©±èžãã‚ˆï¼Ÿ", 
                        replies: [
                            { level: 1, text: "å¤§ä¸ˆå¤«ã€‚" },
                            { level: 2, text: "ä»•äº‹ãŒå¤§å¤‰ã ã£ãŸã€‚" },
                            { level: 3, text: "å®Ÿã¯ã¡ã‚‡ã£ã¨æ‚©ã¿ãŒã‚ã£ã¦â€¦" }
                        ]
                    }
                ]
            },
            kr: { 
                name: "í•œêµ­ì–´", 
                botName: "ë£¨ë§ˆ (KR)", 
                avatarColor: "bg-purple-500", 
                flag: "KR",
                desc: "Friendly & Casual. \"ë°¥ì€ ë¨¹ì—ˆì–´?\"",
                topics: [
                    { 
                        id: 'greet', icon: 'hand', title: "ì¸ì‚¬ (Hi)", 
                        prompt: "ì•ˆë…•! ë°¥ ë¨¹ì—ˆì–´? ì˜¤ëŠ˜ ì–´ë• ì–´?", 
                        replies: [
                            { level: 1, text: "ì‘, ë¨¹ì—ˆì–´." },
                            { level: 2, text: "ì•„ì§ ì•ˆ ë¨¹ì—ˆì–´. ë°°ê³ íŒŒ." },
                            { level: 3, text: "ë„ˆë¬´ ë°”ë¹ ì„œ ì ì‹¬ë„ ëª» ë¨¹ì—ˆì–´ ã… ã… " }
                        ]
                    }
                ]
            },
            es: { 
                name: "EspaÃ±ol", 
                botName: "LUMA (ES)", 
                avatarColor: "bg-yellow-500", 
                flag: "ES",
                desc: "Emotional & Expressive. \"Â¡CuÃ©ntamelo todo!\"",
                topics: [
                    { 
                        id: 'greet', icon: 'hand', title: "Hola", 
                        prompt: "Â¡Hola! Â¡CuÃ¡nto tiempo! Â¿QuÃ© tal todo?", 
                        replies: [
                            { level: 1, text: "Todo bien." },
                            { level: 2, text: "Un poco cansado." },
                            { level: 3, text: "Â¡Ha sido una semana de locos!" }
                        ]
                    }
                ]
            },
            de: { 
                name: "Deutsch", 
                botName: "LUMA (DE)", 
                avatarColor: "bg-teal-600", 
                flag: "DE",
                desc: "Clear & Structured. \"Ich verstehe dich.\"",
                topics: [
                    { 
                        id: 'greet', icon: 'hand', title: "Hallo", 
                        prompt: "Hallo! SchÃ¶n dich zu sehen. Wie war dein Tag?", 
                        replies: [
                            { level: 1, text: "Gut, danke." },
                            { level: 2, text: "Es war okay, aber lang." },
                            { level: 3, text: "Ehrlich gesagt, war es sehr anstrengend." }
                        ]
                    }
                ]
            },
            fr: { 
                name: "FranÃ§ais", 
                botName: "LUMA (FR)", 
                avatarColor: "bg-indigo-500", 
                flag: "FR",
                desc: "Elegant & Patient. \"On prend le temps.\"",
                topics: [
                    { 
                        id: 'greet', icon: 'hand', title: "Bonjour", 
                        prompt: "Salut ! Comment Ã§a va aujourd'hui ?", 
                        replies: [
                            { level: 1, text: "Ã‡a va bien." },
                            { level: 2, text: "Un peu fatiguÃ©." },
                            { level: 3, text: "J'ai passÃ© une journÃ©e incroyable !" }
                        ]
                    }
                ]
            }
        };

        const CARE_RESPONSES = {
            en: [
                "I totally get that. Tell me more. ðŸ¤”", 
                "That sounds intense! How are you holding up?", 
                "I see. That makes sense.",
                "Wow, really? I didn't expect that."
            ],
            jp: [
                "ãã£ã‹ã€ãã‚Œã¯å¤§å¤‰ã ã£ãŸã­â€¦ðŸµ",
                "ã†ã‚“ã†ã‚“ã€ã‚ã‹ã‚‹ã‚ˆã€‚",
                "ã¸ãˆãƒ¼ï¼ãã‚Œã§ã©ã†ãªã£ãŸã®ï¼Ÿ",
                "ç„¡ç†ã—ãªã„ã§ã­ã€‚"
            ],
            default: [
                "I understand. Go on.",
                "That is interesting.",
                "Tell me more about it."
            ]
        };

        // --- STATE ---
        let state = {
            lang: 'en',
            bond: 240,
            currentTopic: null,
            isSmartReplyOpen: false
        };

        // --- DOM ELEMENTS ---
        const els = {
            app: document.getElementById('app'),
            homeScreen: document.getElementById('screen-home'),
            chatScreen: document.getElementById('screen-chat'),
            flagIcon: document.getElementById('flag-icon'),
            bondDisplay: document.getElementById('bond-score-display'),
            homeAvatar: document.getElementById('home-avatar'),
            homeBotName: document.getElementById('home-bot-name'),
            homeBotDesc: document.getElementById('home-bot-desc'),
            topicList: document.getElementById('topic-list'),
            langMenu: document.getElementById('lang-menu'),
            chatLumaName: document.getElementById('chat-luma-name'),
            messagesList: document.getElementById('messages-list'),
            messageInput: document.getElementById('message-input'),
            sendBtn: document.getElementById('send-btn'),
            bondToast: document.getElementById('bond-toast'),
            smartReplyContainer: document.getElementById('smart-reply-container'),
            smartChips: document.getElementById('smart-chips')
        };

        // --- INIT ---
        function init() {
            renderLangMenu();
            updateHome();
            lucide.createIcons();
            
            els.messageInput.addEventListener('input', (e) => {
                const hasText = e.target.value.trim().length > 0;
                updateSendButton(hasText);
            });

            document.getElementById('chat-form').addEventListener('submit', handleSend);
        }

        // --- CORE FUNCTIONS ---

        function updateHome() {
            const data = CONFIG[state.lang];
            els.flagIcon.src = `https://flagsapi.com/${data.flag}/flat/64.png`;
            els.bondDisplay.innerText = state.bond;
            
            // Avatar Styling
            els.homeAvatar.className = `w-full h-full rounded-full flex items-center justify-center text-4xl font-bold text-white shadow-xl ring-4 ring-white transition-transform group-hover:scale-105 ${data.avatarColor}`;
            els.homeAvatar.innerText = data.botName[0]; // First letter
            
            els.homeBotName.innerText = data.botName;
            els.homeBotDesc.innerText = data.desc;

            // Generate Path
            els.topicList.innerHTML = '';
            data.topics.forEach((topic, index) => {
                const btn = document.createElement('button');
                const offsetClass = index % 2 === 0 ? '-translate-x-6' : 'translate-x-6';
                
                btn.className = `w-20 h-20 rounded-full border-b-4 border-gray-200 bg-white shadow-sm flex items-center justify-center transform hover:scale-105 active:scale-95 transition-all relative group z-10 ${offsetClass}`;
                btn.onclick = () => openChat(topic);
                
                // Colors
                const colors = ['text-green-500', 'text-blue-500', 'text-purple-500'];
                const color = colors[index % colors.length];

                btn.innerHTML = `
                    <div class="${color}"><i data-lucide="${topic.icon}" class="w-8 h-8"></i></div>
                    <div class="absolute -bottom-6 whitespace-nowrap text-xs font-bold text-gray-400 group-hover:text-gray-600 transition-colors">
                        ${topic.title}
                    </div>
                `;
                els.topicList.appendChild(btn);
            });
            lucide.createIcons();
        }

        function openChat(topic) {
            state.currentTopic = topic;
            const data = CONFIG[state.lang];
            
            els.chatLumaName.innerText = data.botName;
            
            // Clean & Setup UI
            els.messagesList.innerHTML = '<div class="flex justify-center my-4"><span class="text-[10px] font-bold text-gray-400 bg-gray-200/50 px-3 py-1 rounded-full uppercase tracking-wide">Today</span></div>';
            closeSmartReply();
            
            els.chatScreen.classList.remove('translate-x-full');
            
            // Load Smart Replies
            renderSmartReplies(topic);

            // Bot Greeting
            setTimeout(() => {
                receiveMessage(topic.prompt, true);
            }, 600);
        }

        function goHome() {
            els.chatScreen.classList.add('translate-x-full');
            state.currentTopic = null;
        }

        function toggleLangMenu() {
            els.langMenu.classList.toggle('hidden');
        }

        function renderLangMenu() {
            const list = document.getElementById('lang-list');
            list.innerHTML = '';
            Object.keys(CONFIG).forEach(key => {
                const item = document.createElement('div');
                item.className = "flex items-center gap-3 p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-50 last:border-0";
                item.onclick = () => {
                    state.lang = key;
                    updateHome();
                    toggleLangMenu();
                };
                item.innerHTML = `
                    <div class="w-8 h-8 rounded-full ${CONFIG[key].avatarColor} flex items-center justify-center text-white text-xs font-bold">${CONFIG[key].botName[0]}</div>
                    <div class="text-sm font-bold text-gray-700">${CONFIG[key].name}</div>
                `;
                list.appendChild(item);
            });
        }

        // --- SMART REPLY SYSTEM (LEVEL 1-3) ---

        function toggleSmartReply() {
            state.isSmartReplyOpen = !state.isSmartReplyOpen;
            if (state.isSmartReplyOpen) {
                els.smartReplyContainer.classList.remove('hidden');
                els.smartReplyContainer.classList.add('flex');
            } else {
                closeSmartReply();
            }
        }

        function closeSmartReply() {
            state.isSmartReplyOpen = false;
            els.smartReplyContainer.classList.add('hidden');
            els.smartReplyContainer.classList.remove('flex');
        }

        function renderSmartReplies(topic) {
            els.smartChips.innerHTML = '';
            if (!topic.replies) return;

            topic.replies.forEach(reply => {
                const chip = document.createElement('button');
                // Styles based on level
                let chipClass = 'chip-l1'; // Default
                if (reply.level === 2) chipClass = 'chip-l2';
                if (reply.level === 3) chipClass = 'chip-l3';

                chip.className = `whitespace-nowrap px-3 py-1.5 rounded-full text-xs font-medium transition-transform hover:scale-105 active:scale-95 flex-shrink-0 ${chipClass}`;
                chip.innerHTML = `<span class="opacity-50 mr-1">L${reply.level}</span> ${reply.text}`;
                
                chip.onclick = () => useSmartReply(reply.text);
                els.smartChips.appendChild(chip);
            });
        }

        function useSmartReply(text) {
            els.messageInput.value = text;
            updateSendButton(true);
            closeSmartReply();
            els.messageInput.focus();
        }

        // --- CHAT LOGIC ---

        function handleSend(e) {
            e.preventDefault();
            const text = els.messageInput.value.trim();
            if (!text) return;

            addMessageBubble(text, 'user');
            els.messageInput.value = '';
            updateSendButton(false);
            
            triggerBond();

            // CARE Simulation
            setTimeout(() => {
                const response = generateResponse(text);
                receiveMessage(response.text, false, response.trans);
            }, 1000 + (Math.random() * 1000));
        }

        function generateResponse(input) {
            const data = CONFIG[state.lang];
            const pool = CARE_RESPONSES[state.lang] || CARE_RESPONSES.default;
            const text = pool[Math.floor(Math.random() * pool.length)];
            
            return {
                text: text,
                trans: "é€™æ˜¯ç¿»è­¯çš„ç¤ºç¯„æ–‡å­—..." // In real app, this comes from API
            };
        }

        function receiveMessage(text, isFirst = false, trans = null) {
            // Typing Indicator logic could go here
            // Translation default logic:
            if (!trans) trans = "Translation demo...";
            
            addMessageBubble(text, 'bot', trans);
        }

        function addMessageBubble(text, sender, trans) {
            const isUser = sender === 'user';
            const data = CONFIG[state.lang];

            const row = document.createElement('div');
            row.className = `flex w-full ${isUser ? 'justify-end' : 'justify-start'} slide-up`;

            const bubble = document.createElement('div');
            bubble.className = `max-w-[85%] p-4 rounded-2xl text-[15px] leading-relaxed relative shadow-sm
                ${isUser 
                    ? 'bg-blue-500 text-white rounded-br-none' 
                    : 'bg-white text-gray-800 border border-gray-100 rounded-bl-none'}`;
            
            bubble.innerHTML = `
                <div>${text}</div>
                ${!isUser && trans ? `
                    <div class="mt-2 pt-2 border-t border-gray-100 text-xs text-gray-500 hidden" id="trans-${Date.now()}">${trans}</div>
                    <button onclick="document.getElementById('trans-${Date.now()}').classList.toggle('hidden')" class="mt-1 text-[10px] font-bold text-gray-300 uppercase tracking-wider hover:text-blue-500 flex items-center gap-1 transition-colors">
                        <i data-lucide="languages" class="w-3 h-3"></i> Translate
                    </button>
                ` : ''}
            `;

            if (!isUser) {
                const avatar = document.createElement('div');
                avatar.className = `w-8 h-8 rounded-full ${data.avatarColor} flex items-center justify-center text-white font-bold text-xs shrink-0 mr-2 self-end mb-1 shadow-sm`;
                avatar.innerText = data.botName[0];
                row.appendChild(avatar);
                row.appendChild(bubble);
            } else {
                row.appendChild(bubble);
            }

            els.messagesList.appendChild(row);
            els.messagesList.scrollTo({ top: els.messagesList.scrollHeight, behavior: 'smooth' });
            lucide.createIcons();
        }

        function updateSendButton(isActive) {
            if (isActive) {
                els.sendBtn.classList.remove('bg-gray-200', 'text-gray-500', 'border-gray-300');
                els.sendBtn.classList.add('bg-blue-500', 'text-white', 'border-blue-600');
            } else {
                els.sendBtn.classList.add('bg-gray-200', 'text-gray-500', 'border-gray-300');
                els.sendBtn.classList.remove('bg-blue-500', 'text-white', 'border-blue-600');
            }
        }

        function triggerBond() {
            state.bond += 10;
            els.bondDisplay.innerText = state.bond;
            els.bondToast.classList.remove('hidden');
            setTimeout(() => els.bondToast.classList.add('hidden'), 1500);
            els.bondDisplay.parentElement.classList.add('scale-110');
            setTimeout(() => els.bondDisplay.parentElement.classList.remove('scale-110'), 200);
        }

        init();
    </script>
</body>
</html>
